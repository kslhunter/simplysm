{
  "version": 3,
  "sources": ["../../src/directives/invalid.ts"],
  "sourcesContent": ["import { createEffect, onCleanup } from \"solid-js\";\nimport { invalidContainer, invalidDot, hiddenInputStyle } from \"./invalid.css\";\n\ndeclare module \"solid-js\" {\n  namespace JSX {\n    interface Directives {\n      /**\n       * \uC720\uD6A8\uC131 \uAC80\uC99D directive\n       * @param accessor \uC5D0\uB7EC \uBA54\uC2DC\uC9C0\uB97C \uBC18\uD658\uD558\uB294 \uD568\uC218. \uBE48 \uBB38\uC790\uC5F4\uC774\uBA74 valid \uC0C1\uD0DC\n       */\n      invalid: () => string;\n    }\n  }\n}\n\n/**\n * \uC720\uD6A8\uC131 \uAC80\uC99D directive\n *\n * \uC694\uC18C\uC5D0 \uC720\uD6A8\uC131 \uAC80\uC99D \uC0C1\uD0DC\uB97C \uD45C\uC2DC\uD558\uACE0, \uD3FC \uC81C\uCD9C \uC2DC \uBE0C\uB77C\uC6B0\uC800 \uAE30\uBCF8 \uB3D9\uC791\uC73C\uB85C \uD3EC\uCEE4\uC2A4 \uC774\uB3D9\uC744 \uC9C0\uC6D0\uD55C\uB2E4.\n *\n * @param el - directive\uAC00 \uC801\uC6A9\uB420 HTML \uC694\uC18C\n * @param accessor - \uC5D0\uB7EC \uBA54\uC2DC\uC9C0\uB97C \uBC18\uD658\uD558\uB294 accessor. \uBE48 \uBB38\uC790\uC5F4\uC774\uBA74 valid \uC0C1\uD0DC\n *\n * @example\n * ```tsx\n * const [name, setName] = createSignal(\"\");\n * const errorMessage = () => name().length === 0 ? \"\uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694\" : \"\";\n *\n * <div use:invalid={errorMessage}>\n *   <TextField value={name()} onChange={setName} />\n * </div>\n * ```\n *\n * @example\n * ```tsx\n * // \uD3FC\uACFC \uD568\uAED8 \uC0AC\uC6A9\n * <form onSubmit={handleSubmit}>\n *   <div use:invalid={errorMessage}>\n *     <TextField value={name()} onChange={setName} />\n *   </div>\n *   <button type=\"submit\">\uC81C\uCD9C</button>\n * </form>\n * // invalid \uC0C1\uD0DC\uC5D0\uC11C \uC81C\uCD9C \uC2DC \uC790\uB3D9\uC73C\uB85C \uD574\uB2F9 \uD544\uB4DC\uB85C \uD3EC\uCEE4\uC2A4 \uC774\uB3D9\n * ```\n */\nexport const invalid = (el: HTMLElement, accessor: () => () => string) => {\n  // 1. \uCEE8\uD14C\uC774\uB108 \uD074\uB798\uC2A4 \uCD94\uAC00\n  el.classList.add(invalidContainer);\n\n  // 2. \uC228\uACA8\uC9C4 input \uC0DD\uC131 \uBC0F \uC0BD\uC785 (\uD3FC \uAC80\uC99D\uC6A9)\n  const hiddenInput = document.createElement(\"input\");\n  hiddenInput.type = \"text\";\n  hiddenInput.className = hiddenInputStyle;\n  hiddenInput.tabIndex = -1;\n  hiddenInput.setAttribute(\"aria-hidden\", \"true\");\n  el.appendChild(hiddenInput);\n\n  // 3. \uAC80\uC99D \uACB0\uACFC \uBC18\uC601\n  createEffect(() => {\n    const message = accessor()();\n    hiddenInput.setCustomValidity(message);\n\n    if (message !== \"\") {\n      el.classList.add(invalidDot);\n      el.setAttribute(\"aria-invalid\", \"true\");\n    } else {\n      el.classList.remove(invalidDot);\n      el.setAttribute(\"aria-invalid\", \"false\");\n    }\n  });\n\n  // 4. cleanup\n  onCleanup(() => {\n    // \uC694\uC18C\uAC00 \uC774\uBBF8 \uC81C\uAC70\uB41C \uACBD\uC6B0 \uBC29\uC5B4 \uCC98\uB9AC\n    if (hiddenInput.parentNode === el) {\n      el.removeChild(hiddenInput);\n    }\n    el.classList.remove(invalidContainer, invalidDot);\n    el.removeAttribute(\"aria-invalid\");\n  });\n};\n\n// TypeScript\uC5D0\uC11C directive import \uC5C6\uC774\uB3C4 \uC0AC\uC6A9\uD560 \uC218 \uC788\uB3C4\uB85D \uBE48 export\nexport default invalid;\n"],
  "mappings": "AAAA,SAAS,cAAc,iBAAiB;AACxC,SAAS,kBAAkB,YAAY,wBAAwB;AA4CxD,MAAM,UAAU,CAAC,IAAiB,aAAiC;AAExE,KAAG,UAAU,IAAI,gBAAgB;AAGjC,QAAM,cAAc,SAAS,cAAc,OAAO;AAClD,cAAY,OAAO;AACnB,cAAY,YAAY;AACxB,cAAY,WAAW;AACvB,cAAY,aAAa,eAAe,MAAM;AAC9C,KAAG,YAAY,WAAW;AAG1B,eAAa,MAAM;AACjB,UAAM,UAAU,SAAS,EAAE;AAC3B,gBAAY,kBAAkB,OAAO;AAErC,QAAI,YAAY,IAAI;AAClB,SAAG,UAAU,IAAI,UAAU;AAC3B,SAAG,aAAa,gBAAgB,MAAM;AAAA,IACxC,OAAO;AACL,SAAG,UAAU,OAAO,UAAU;AAC9B,SAAG,aAAa,gBAAgB,OAAO;AAAA,IACzC;AAAA,EACF,CAAC;AAGD,YAAU,MAAM;AAEd,QAAI,YAAY,eAAe,IAAI;AACjC,SAAG,YAAY,WAAW;AAAA,IAC5B;AACA,OAAG,UAAU,OAAO,kBAAkB,UAAU;AAChD,OAAG,gBAAgB,cAAc;AAAA,EACnC,CAAC;AACH;AAGA,IAAO,kBAAQ;",
  "names": []
}
