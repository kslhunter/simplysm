{
  "version": 3,
  "sources": ["../../../src/components/data/list.tsx"],
  "sourcesContent": ["import { type JSX, type ParentComponent, splitProps } from \"solid-js\";\nimport { list } from \"./list.css\";\nimport { objPick } from \"@simplysm/core-common\";\n\n/**\n * List \uCEF4\uD3EC\uB10C\uD2B8\uC758 props\n * @property inset - true\uC77C \uACBD\uC6B0 \uD14C\uB450\uB9AC \uC548\uCABD \uC5EC\uBC31 \uC2A4\uD0C0\uC77C \uC801\uC6A9\n */\nexport interface ListProps extends JSX.HTMLAttributes<HTMLDivElement> {\n  inset?: boolean;\n}\n\n/**\n * ListItem\uB4E4\uC744 \uB2F4\uB294 \uCEE8\uD14C\uC774\uB108 \uCEF4\uD3EC\uB10C\uD2B8\n *\n * \uD2B8\uB9AC\uBDF0 \uC2A4\uD0C0\uC77C \uD0A4\uBCF4\uB4DC \uB124\uBE44\uAC8C\uC774\uC158 \uC9C0\uC6D0:\n * - `Space`: \uD604\uC7AC \uD56D\uBAA9 \uD1A0\uAE00\n * - `\u2191`/`\u2193`: \uC774\uC804/\uB2E4\uC74C \uD56D\uBAA9\uC73C\uB85C \uD3EC\uCEE4\uC2A4 \uC774\uB3D9\n * - `Home`/`End`: \uCCAB \uBC88\uC9F8/\uB9C8\uC9C0\uB9C9 \uD56D\uBAA9\uC73C\uB85C \uD3EC\uCEE4\uC2A4 \uC774\uB3D9\n * - `\u2192`: \uB2EB\uD600\uC788\uC73C\uBA74 \uC5F4\uAE30, \uC5F4\uB824\uC788\uC73C\uBA74 \uCCAB \uBC88\uC9F8 \uC790\uC2DD\uC73C\uB85C \uD3EC\uCEE4\uC2A4\n * - `\u2190`: \uC5F4\uB824\uC788\uC73C\uBA74 \uB2EB\uAE30, \uB2EB\uD600\uC788\uC73C\uBA74 \uBD80\uBAA8\uB85C \uD3EC\uCEE4\uC2A4\n *\n * @example\n * ```tsx\n * <List>\n *   <ListItem>\uD56D\uBAA9 1</ListItem>\n *   <ListItem>\uD56D\uBAA9 2</ListItem>\n * </List>\n *\n * <List inset>\n *   <ListItem>\uC778\uC14B \uC2A4\uD0C0\uC77C \uD56D\uBAA9</ListItem>\n * </List>\n * ```\n */\nexport const List: ParentComponent<ListProps> = (props) => {\n  const [local, rest] = splitProps(props, [...list.variants(), \"class\", \"children\"]);\n\n  let listRef!: HTMLDivElement;\n\n  const isVisible = (el: Element): boolean => {\n    let parent = el.parentElement;\n    while (parent && parent !== listRef) {\n      if (parent.hasAttribute(\"data-collapsed\")) {\n        return false;\n      }\n      parent = parent.parentElement;\n    }\n    return true;\n  };\n\n  const handleArrowRight = (current: HTMLElement) => {\n    const isOpen = current.getAttribute(\"aria-expanded\") === \"true\";\n    const hasChildren = current.hasAttribute(\"aria-expanded\");\n\n    if (!hasChildren) return;\n\n    if (!isOpen) {\n      current.click();\n    } else {\n      const nestedItem = current.parentElement?.querySelector(\n        \":scope > [data-collapsed] [data-list-item], :scope > * > [data-list-item]\",\n      ) as HTMLElement | null;\n      nestedItem?.focus();\n    }\n  };\n\n  const handleArrowLeft = (current: HTMLElement) => {\n    const isOpen = current.getAttribute(\"aria-expanded\") === \"true\";\n    const hasChildren = current.hasAttribute(\"aria-expanded\");\n\n    if (hasChildren && isOpen) {\n      current.click();\n    } else {\n      const parentItem = current.parentElement?.parentElement?.closest(\"[data-list-item]\") as HTMLElement | null;\n      parentItem?.focus();\n    }\n  };\n\n  const handleKeyDown = (e: KeyboardEvent) => {\n    const current = e.target as HTMLElement;\n    if (!current.hasAttribute(\"data-list-item\")) return;\n\n    const allItems = [...listRef.querySelectorAll('[data-list-item]:not([aria-disabled=\"true\"])')] as HTMLElement[];\n    const visibleItems = allItems.filter((el) => isVisible(el));\n    const idx = visibleItems.indexOf(current);\n\n    switch (e.key) {\n      case \" \":\n      case \"Enter\":\n        e.preventDefault();\n        e.stopPropagation();\n        current.click();\n        break;\n      case \"ArrowDown\":\n        if (idx + 1 < visibleItems.length) {\n          e.preventDefault();\n          e.stopPropagation();\n          visibleItems[idx + 1]?.focus();\n        }\n        break;\n      case \"ArrowUp\":\n        if (idx - 1 >= 0) {\n          e.preventDefault();\n          e.stopPropagation();\n          visibleItems[idx - 1]?.focus();\n        }\n        break;\n      case \"Home\":\n        if (visibleItems.length > 0 && idx !== 0) {\n          e.preventDefault();\n          e.stopPropagation();\n          visibleItems[0]?.focus();\n        }\n        break;\n      case \"End\":\n        if (visibleItems.length > 0 && idx !== visibleItems.length - 1) {\n          e.preventDefault();\n          e.stopPropagation();\n          visibleItems[visibleItems.length - 1]?.focus();\n        }\n        break;\n      case \"ArrowRight\":\n        e.preventDefault();\n        e.stopPropagation();\n        handleArrowRight(current);\n        break;\n      case \"ArrowLeft\":\n        e.preventDefault();\n        e.stopPropagation();\n        handleArrowLeft(current);\n        break;\n    }\n  };\n\n  return (\n    <div\n      ref={listRef}\n      role=\"tree\"\n      onKeyDown={handleKeyDown}\n      {...rest}\n      class={[list(objPick(local, list.variants())), local.class].filterExists().join(\" \")}\n    >\n      {local.children}\n    </div>\n  );\n};\n"],
  "mappings": "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",
  "names": []
}
