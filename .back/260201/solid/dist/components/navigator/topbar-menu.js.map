{
  "version": 3,
  "sources": ["../../../src/components/navigator/topbar-menu.tsx"],
  "sourcesContent": ["import \"@simplysm/core-common\";\nimport { type Component, createSignal, For, type JSX, Show, splitProps } from \"solid-js\";\nimport type { IconProps } from \"@tabler/icons-solidjs\";\nimport { IconChevronDown } from \"@tabler/icons-solidjs\";\nimport { useLocation, useNavigate } from \"@solidjs/router\";\nimport { topbarMenu, topbarMenuNestedList } from \"./topbar-menu.css\";\nimport { Dropdown } from \"../overlay/dropdown\";\nimport { DropdownPopup } from \"../overlay/dropdown-popup\";\nimport { useDropdown } from \"../overlay/dropdown-context\";\nimport { Button } from \"../controls/button\";\nimport { List } from \"../data/list\";\nimport { ListItem } from \"../data/list-item\";\nimport { atoms } from \"../../styles/atoms.css\";\nimport { buildHref } from \"../../utils/build-href\";\n\n/**\n * \uBA54\uB274 \uC544\uC774\uD15C \uD0C0\uC785\n *\n * @property title - \uBA54\uB274 \uD45C\uC2DC \uC774\uB984\n * @property path - \uB77C\uC6B0\uD130 \uACBD\uB85C (\uC5C6\uC73C\uBA74 \uD074\uB9AD \uBD88\uAC00)\n * @property url - \uC678\uBD80 URL (\uC0C8 \uD0ED\uC5D0\uC11C \uC5F4\uB9BC)\n * @property icon - \uBA54\uB274 \uC544\uC774\uCF58 \uCEF4\uD3EC\uB10C\uD2B8\n * @property children - \uC911\uCCA9 \uBA54\uB274\n */\nexport interface TopbarMenuItem {\n  title: string;\n  path?: string;\n  url?: string;\n  icon?: Component<IconProps>;\n  children?: TopbarMenuItem[];\n}\n\n/**\n * TopbarMenu \uCEF4\uD3EC\uB10C\uD2B8\uC758 props\n *\n * @property menus - 1\uB2E8\uACC4 \uBA54\uB274 \uBC30\uC5F4 (\uAC01 \uBA54\uB274\uAC00 \uB4DC\uB86D\uB2E4\uC6B4 \uD2B8\uB9AC\uAC70)\n * @property isSelectedFn - \uBA54\uB274 \uC120\uD0DD \uC0C1\uD0DC \uD310\uBCC4 \uD568\uC218 (\uAE30\uBCF8\uAC12: \uD604\uC7AC \uACBD\uB85C\uC640 path \uBE44\uAD50)\n */\nexport interface TopbarMenuProps extends Omit<JSX.HTMLAttributes<HTMLElement>, \"children\"> {\n  menus: TopbarMenuItem[];\n  isSelectedFn?: (menu: TopbarMenuItem) => boolean;\n}\n\n/**\n * \uD0D1\uBC14 \uB4DC\uB86D\uB2E4\uC6B4 \uBA54\uB274 \uCEF4\uD3EC\uB10C\uD2B8\n *\n * 1\uB2E8\uACC4 \uBA54\uB274\uB294 \uC0C1\uB2E8\uBC14\uC5D0 \uBC84\uD2BC\uC73C\uB85C \uD45C\uC2DC\uB418\uACE0,\n * \uAC01 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uBA74 \uB4DC\uB86D\uB2E4\uC6B4\uC73C\uB85C \uD558\uC704 \uBA54\uB274\uAC00 \uD45C\uC2DC\uB41C\uB2E4.\n * \uBB34\uC81C\uD55C \uC911\uCCA9\uC744 \uC9C0\uC6D0\uD55C\uB2E4.\n *\n * @example\n * ```tsx\n * const menus: TopbarMenuItem[] = [\n *   {\n *     title: \"\uAD00\uB9AC\",\n *     children: [\n *       { title: \"\uC0AC\uC6A9\uC790 \uAD00\uB9AC\", path: \"/admin/users\" },\n *       { title: \"\uC124\uC815\", path: \"/admin/settings\" },\n *     ],\n *   },\n * ];\n *\n * <TopbarMenu menus={menus} />\n * ```\n */\nexport const TopbarMenu: Component<TopbarMenuProps> = (props) => {\n  const [local, rest] = splitProps(props, [\"menus\", \"isSelectedFn\", \"class\"]);\n\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const isSelected = (menu: TopbarMenuItem): boolean => {\n    if (local.isSelectedFn) return local.isSelectedFn(menu);\n    return menu.path != null && location.pathname === menu.path;\n  };\n\n  const handleMenuClick = (menu: TopbarMenuItem, event: MouseEvent, closeDropdown: () => void) => {\n    // \uC678\uBD80 URL\n    if (menu.url != null) {\n      window.open(menu.url, \"_blank\");\n      closeDropdown();\n      return;\n    }\n\n    // \uB0B4\uBD80 \uACBD\uB85C\n    if (menu.path != null) {\n      if (event.ctrlKey || event.altKey) {\n        window.open(buildHref(menu.path), \"_blank\");\n      } else if (event.shiftKey) {\n        window.open(buildHref(menu.path), \"_blank\", \"width=800,height=800\");\n      } else {\n        navigate(menu.path);\n      }\n      closeDropdown();\n    }\n  };\n\n  return (\n    <nav {...rest} class={[topbarMenu, local.class].filterExists().join(\" \")}>\n      <For each={local.menus}>\n        {(menu) => (\n          <TopbarMenuDropdown\n            menu={menu}\n            isSelected={isSelected}\n            onMenuClick={handleMenuClick}\n          />\n        )}\n      </For>\n    </nav>\n  );\n};\n\n/**\n * \uAC1C\uBCC4 \uB4DC\uB86D\uB2E4\uC6B4 \uBA54\uB274 (\uC790\uCCB4 open \uC0C1\uD0DC \uAD00\uB9AC)\n */\nconst TopbarMenuDropdown: Component<{\n  menu: TopbarMenuItem;\n  isSelected: (menu: TopbarMenuItem) => boolean;\n  onMenuClick: (menu: TopbarMenuItem, event: MouseEvent, closeDropdown: () => void) => void;\n}> = (props) => {\n  const [open, setOpen] = createSignal(false);\n\n  return (\n    <Dropdown open={open()} onOpenChange={setOpen}>\n      <TopbarMenuTrigger menu={props.menu} />\n      <TopbarMenuPopup\n        menus={props.menu.children ?? []}\n        isSelected={props.isSelected}\n        onMenuClick={props.onMenuClick}\n      />\n    </Dropdown>\n  );\n};\n\n/**\n * \uB4DC\uB86D\uB2E4\uC6B4 \uD2B8\uB9AC\uAC70 \uBC84\uD2BC (1\uB2E8\uACC4 \uBA54\uB274)\n */\nconst TopbarMenuTrigger: Component<{ menu: TopbarMenuItem }> = (props) => {\n  return (\n    <Button link>\n      <Show when={props.menu.icon}>{(icon) => icon()({ size: 18 })}</Show>\n      {props.menu.title}\n      <IconChevronDown size={16} />\n    </Button>\n  );\n};\n\n/**\n * \uB4DC\uB86D\uB2E4\uC6B4 \uD31D\uC5C5 \uB0B4\uC6A9 (useDropdown\uC73C\uB85C close \uD568\uC218 \uC811\uADFC)\n */\nconst TopbarMenuPopup: Component<{\n  menus: TopbarMenuItem[];\n  isSelected: (menu: TopbarMenuItem) => boolean;\n  onMenuClick: (menu: TopbarMenuItem, event: MouseEvent, closeDropdown: () => void) => void;\n}> = (props) => {\n  const dropdown = useDropdown();\n\n  return (\n    <DropdownPopup>\n      <List inset>\n        <MenuItemRenderer\n          menus={props.menus}\n          depth={0}\n          isSelected={props.isSelected}\n          onMenuClick={props.onMenuClick}\n          closeDropdown={() => dropdown?.close()}\n        />\n      </List>\n    </DropdownPopup>\n  );\n};\n\ninterface MenuItemRendererProps {\n  menus: TopbarMenuItem[];\n  depth: number;\n  isSelected: (menu: TopbarMenuItem) => boolean;\n  onMenuClick: (menu: TopbarMenuItem, event: MouseEvent, closeDropdown: () => void) => void;\n  closeDropdown: () => void;\n}\n\n/**\n * \uC7AC\uADC0\uC801\uC73C\uB85C \uBA54\uB274 \uC544\uC774\uD15C\uC744 \uB80C\uB354\uB9C1\uD558\uB294 \uB0B4\uBD80 \uCEF4\uD3EC\uB10C\uD2B8\n */\nconst MenuItemRenderer: Component<MenuItemRendererProps> = (props) => {\n  return (\n    <For each={props.menus}>\n      {(menu) => (\n        <ListItem\n          layout=\"flat\"\n          selected={props.isSelected(menu)}\n          style={{ \"text-indent\": `${props.depth > 0 ? (props.depth + 1) * 0.5 : 0}rem` }}\n          class={atoms({ gap: \"xs\" })}\n          onClick={(e) => props.onMenuClick(menu, e, props.closeDropdown)}\n        >\n          <Show when={menu.icon}>{(icon) => icon()({ size: 16 })}</Show>\n          <span>{menu.title}</span>\n          <Show when={menu.children?.length}>\n            <List inset class={topbarMenuNestedList}>\n              <MenuItemRenderer\n                menus={menu.children!}\n                depth={props.depth + 1}\n                isSelected={props.isSelected}\n                onMenuClick={props.onMenuClick}\n                closeDropdown={props.closeDropdown}\n              />\n            </List>\n          </Show>\n        </ListItem>\n      )}\n    </For>\n  );\n};\n"],
  "mappings": "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",
  "names": []
}
