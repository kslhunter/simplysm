{
  "version": 3,
  "sources": ["../../../src/components/controls/date-field.tsx"],
  "sourcesContent": ["import { type Component, type JSX, Show, splitProps } from \"solid-js\";\nimport { createFieldState } from \"../../hooks/createFieldState\";\nimport {\n  type DateFieldStyles,\n  dateField,\n  dateFieldContainer,\n  dateFieldContent,\n  dateFieldInput,\n} from \"./date-field.css\";\nimport { objPick, DateOnly } from \"@simplysm/core-common\";\nimport \"@simplysm/core-common\";\n\n/**\n * DateField \uCEF4\uD3EC\uB10C\uD2B8\uC758 props\n * @property value - \uD604\uC7AC \uAC12 (onChange\uC640 \uD568\uAED8 \uC0AC\uC6A9 \uC2DC controlled, \uB2E8\uB3C5 \uC0AC\uC6A9 \uC2DC \uCD08\uAE30\uAC12)\n * @property onChange - \uAC12 \uBCC0\uACBD \uC2DC \uD638\uCD9C\uB418\uB294 \uCF5C\uBC31 (\uC788\uC73C\uBA74 controlled \uBAA8\uB4DC)\n * @property type - \uC785\uB825 \uD0C0\uC785 (date, month, year)\n * @property min - \uC120\uD0DD \uAC00\uB2A5\uD55C \uCD5C\uC18C \uB0A0\uC9DC\n * @property max - \uC120\uD0DD \uAC00\uB2A5\uD55C \uCD5C\uB300 \uB0A0\uC9DC\n * @property size - \uD544\uB4DC \uD06C\uAE30 (sm, lg)\n * @property inset - true\uC77C \uACBD\uC6B0 \uD14C\uC774\uBE14 \uC140 \uB4F1\uC5D0\uC11C \uC0AC\uC6A9\uD558\uAE30 \uC704\uD55C \uC778\uC14B \uC2A4\uD0C0\uC77C \uC801\uC6A9\n * @property inline - true\uC77C \uACBD\uC6B0 inline-block\uC73C\uB85C \uD45C\uC2DC\n */\nexport interface DateFieldProps\n  extends Omit<JSX.InputHTMLAttributes<HTMLInputElement>, \"value\" | \"onChange\" | \"type\" | \"min\" | \"max\" | \"size\">,\n    DateFieldStyles {\n  value?: DateOnly | undefined;\n  onChange?: (value: DateOnly | undefined) => void;\n  type?: \"date\" | \"month\" | \"year\";\n  min?: DateOnly;\n  max?: DateOnly;\n}\n\n/**\n * \uB0A0\uC9DC \uC785\uB825 \uD544\uB4DC \uCEF4\uD3EC\uB10C\uD2B8\n *\n * @example\n * ```tsx\n * const [date, setDate] = createSignal<DateOnly | undefined>(new DateOnly());\n * <DateField value={date()} onChange={setDate} />\n * <DateField value={date()} onChange={setDate} type=\"month\" />\n * <DateField value={date()} onChange={setDate} min={new DateOnly(2024, 1, 1)} />\n * ```\n */\nexport const DateField: Component<DateFieldProps> = (props) => {\n  const [local, rest] = splitProps(props, [\n    ...dateField.variants(),\n    \"class\",\n    \"value\",\n    \"onChange\",\n    \"type\",\n    \"min\",\n    \"max\",\n    \"placeholder\",\n  ]);\n\n  const fieldState = createFieldState({\n    value: () => local.value,\n    onChange: () => local.onChange,\n  });\n\n  // HTML input type \uACB0\uC815\n  const inputType = () => {\n    switch (local.type) {\n      case \"month\":\n        return \"month\";\n      case \"year\":\n        return \"number\"; // \uB124\uC774\uD2F0\uBE0C year picker\uAC00 \uC5C6\uC73C\uBBC0\uB85C number \uC0AC\uC6A9\n      default:\n        return \"date\";\n    }\n  };\n\n  // \uD45C\uC2DC\uD560 \uAC12 \uACC4\uC0B0\n  const inputValue = () => {\n    const value = fieldState.currentValue();\n    if (value === undefined) return \"\";\n\n    switch (local.type) {\n      case \"month\":\n        return value.toFormatString(\"yyyy-MM\");\n      case \"year\":\n        return String(value.year);\n      default:\n        return value.toFormatString(\"yyyy-MM-dd\");\n    }\n  };\n\n  // content\uC6A9 \uD45C\uC2DC \uAC12 (inset \uBAA8\uB4DC)\n  const displayValue = () => {\n    const value = fieldState.currentValue();\n    if (value === undefined) return \"\";\n\n    switch (local.type) {\n      case \"month\":\n        return value.toFormatString(\"yyyy-MM\");\n      case \"year\":\n        return String(value.year);\n      default:\n        return value.toFormatString(\"yyyy-MM-dd\");\n    }\n  };\n\n  // min \uAC12 \uACC4\uC0B0\n  const minValue = () => {\n    if (local.min === undefined) return undefined;\n\n    switch (local.type) {\n      case \"month\":\n        return local.min.toFormatString(\"yyyy-MM\");\n      case \"year\":\n        return String(local.min.year);\n      default:\n        return local.min.toFormatString(\"yyyy-MM-dd\");\n    }\n  };\n\n  // max \uAC12 \uACC4\uC0B0\n  const maxValue = () => {\n    if (local.max === undefined) return undefined;\n\n    switch (local.type) {\n      case \"month\":\n        return local.max.toFormatString(\"yyyy-MM\");\n      case \"year\":\n        return String(local.max.year);\n      default:\n        return local.max.toFormatString(\"yyyy-MM-dd\");\n    }\n  };\n\n  // \uBCC0\uACBD \uD578\uB4E4\uB7EC\n  const handleChange: JSX.EventHandler<HTMLInputElement, Event> = (e) => {\n    const input = e.currentTarget;\n\n    if (input.value === \"\") {\n      fieldState.setValue(undefined);\n      return;\n    }\n\n    try {\n      let newValue: DateOnly | undefined;\n      switch (local.type) {\n        case \"month\": {\n          // yyyy-MM \uD615\uC2DD\n          const parts = input.value.split(\"-\").map(Number);\n          const year = parts[0] as number | undefined;\n          const month = parts[1] as number | undefined;\n          if (\n            year != null &&\n            month != null &&\n            !Number.isNaN(year) &&\n            !Number.isNaN(month) &&\n            month >= 1 &&\n            month <= 12\n          ) {\n            newValue = new DateOnly(year, month, 1);\n          }\n          break;\n        }\n        case \"year\": {\n          // \uC5F0\uB3C4\uB9CC\n          const year = Number(input.value);\n          if (!Number.isNaN(year) && year > 0 && year <= 9999) {\n            newValue = new DateOnly(year, 1, 1);\n          }\n          break;\n        }\n        default: {\n          // yyyy-MM-dd \uD615\uC2DD\n          newValue = DateOnly.parse(input.value);\n        }\n      }\n      if (newValue !== undefined) {\n        fieldState.setValue(newValue);\n      }\n    } catch {\n      // \uD30C\uC2F1 \uC2E4\uD328 \uC2DC setValue \uD638\uCD9C \uC548\uD568\n    }\n  };\n\n  // \uACF5\uD1B5 input props\n  const inputProps = () => ({\n    type: inputType(),\n    value: inputValue(),\n    onChange: handleChange,\n    min: minValue(),\n    max: maxValue(),\n    placeholder: local.placeholder,\n    \"aria-disabled\": rest.disabled ? (\"true\" as const) : undefined,\n    \"aria-readonly\": rest.readOnly ? (\"true\" as const) : undefined,\n  });\n\n  return (\n    <Show\n      when={local.inline}\n      fallback={\n        <input\n          {...rest}\n          {...inputProps()}\n          class={[dateField(objPick(local, dateField.variants())), local.class]\n            .filterExists()\n            .join(\" \")}\n        />\n      }\n    >\n      <div class={dateFieldContainer}>\n        <div class={dateFieldContent}>\n          {displayValue() !== \"\" ? displayValue() : (local.placeholder ?? \"\\u00A0\")}\n        </div>\n        <input\n          {...rest}\n          {...inputProps()}\n          class={[dateFieldInput, dateField(objPick(local, dateField.variants())), local.class]\n            .filterExists()\n            .join(\" \")}\n        />\n      </div>\n    </Show>\n  );\n};\n"],
  "mappings": "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",
  "names": []
}
