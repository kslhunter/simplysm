{
  "version": 3,
  "sources": ["../../../src/components/controls/datetime-field.tsx"],
  "sourcesContent": ["import { type Component, type JSX, Show, splitProps } from \"solid-js\";\nimport { createFieldState } from \"../../hooks/createFieldState\";\nimport {\n  type DateTimeFieldStyles,\n  dateTimeField,\n  dateTimeFieldContainer,\n  dateTimeFieldContent,\n  dateTimeFieldInput,\n} from \"./datetime-field.css\";\nimport { objPick, DateTime } from \"@simplysm/core-common\";\nimport \"@simplysm/core-common\";\n\n/**\n * DateTimeField \uCEF4\uD3EC\uB10C\uD2B8\uC758 props\n * @property value - \uD604\uC7AC \uAC12 (onChange\uC640 \uD568\uAED8 \uC0AC\uC6A9 \uC2DC controlled, \uB2E8\uB3C5 \uC0AC\uC6A9 \uC2DC \uCD08\uAE30\uAC12)\n * @property onChange - \uAC12 \uBCC0\uACBD \uC2DC \uD638\uCD9C\uB418\uB294 \uCF5C\uBC31 (\uC788\uC73C\uBA74 controlled \uBAA8\uB4DC)\n * @property type - \uC785\uB825 \uD0C0\uC785 (datetime: \uB0A0\uC9DC+\uC2DC:\uBD84, datetime-sec: \uB0A0\uC9DC+\uC2DC:\uBD84:\uCD08)\n * @property min - \uC120\uD0DD \uAC00\uB2A5\uD55C \uCD5C\uC18C \uB0A0\uC9DC\uC2DC\uAC04\n * @property max - \uC120\uD0DD \uAC00\uB2A5\uD55C \uCD5C\uB300 \uB0A0\uC9DC\uC2DC\uAC04\n * @property size - \uD544\uB4DC \uD06C\uAE30 (sm, lg)\n * @property inset - true\uC77C \uACBD\uC6B0 \uD14C\uC774\uBE14 \uC140 \uB4F1\uC5D0\uC11C \uC0AC\uC6A9\uD558\uAE30 \uC704\uD55C \uC778\uC14B \uC2A4\uD0C0\uC77C \uC801\uC6A9\n * @property inline - true\uC77C \uACBD\uC6B0 inline-block\uC73C\uB85C \uD45C\uC2DC\n */\nexport interface DateTimeFieldProps\n  extends Omit<JSX.InputHTMLAttributes<HTMLInputElement>, \"value\" | \"onChange\" | \"type\" | \"min\" | \"max\" | \"size\">,\n    DateTimeFieldStyles {\n  value?: DateTime | undefined;\n  onChange?: (value: DateTime | undefined) => void;\n  type?: \"datetime\" | \"datetime-sec\";\n  min?: DateTime;\n  max?: DateTime;\n}\n\n/**\n * \uB0A0\uC9DC\uC2DC\uAC04 \uC785\uB825 \uD544\uB4DC \uCEF4\uD3EC\uB10C\uD2B8\n *\n * @example\n * ```tsx\n * const [dt, setDt] = createSignal<DateTime | undefined>(new DateTime());\n * <DateTimeField value={dt()} onChange={setDt} />\n * <DateTimeField value={dt()} onChange={setDt} type=\"datetime-sec\" />\n * ```\n */\nexport const DateTimeField: Component<DateTimeFieldProps> = (props) => {\n  const [local, rest] = splitProps(props, [\n    ...dateTimeField.variants(),\n    \"class\",\n    \"value\",\n    \"onChange\",\n    \"type\",\n    \"min\",\n    \"max\",\n    \"placeholder\",\n  ]);\n\n  const fieldState = createFieldState({\n    value: () => local.value,\n    onChange: () => local.onChange,\n  });\n\n  // step \uACB0\uC815 (\uCD08 \uB2E8\uC704 \uD45C\uC2DC \uC5EC\uBD80)\n  const step = () => (local.type === \"datetime-sec\" ? \"1\" : undefined);\n\n  // \uD45C\uC2DC\uD560 \uAC12 \uACC4\uC0B0\n  const inputValue = () => {\n    const value = fieldState.currentValue();\n    if (value === undefined) return \"\";\n\n    if (local.type === \"datetime-sec\") {\n      return value.toFormatString(\"yyyy-MM-ddTHH:mm:ss\");\n    }\n    return value.toFormatString(\"yyyy-MM-ddTHH:mm\");\n  };\n\n  // content\uC6A9 \uD45C\uC2DC \uAC12 (inset \uBAA8\uB4DC)\n  const displayValue = () => {\n    const value = fieldState.currentValue();\n    if (value === undefined) return \"\";\n\n    if (local.type === \"datetime-sec\") {\n      return value.toFormatString(\"yyyy-MM-dd HH:mm:ss\");\n    }\n    return value.toFormatString(\"yyyy-MM-dd HH:mm\");\n  };\n\n  // min \uAC12 \uACC4\uC0B0\n  const minValue = () => {\n    if (local.min === undefined) return undefined;\n\n    if (local.type === \"datetime-sec\") {\n      return local.min.toFormatString(\"yyyy-MM-ddTHH:mm:ss\");\n    }\n    return local.min.toFormatString(\"yyyy-MM-ddTHH:mm\");\n  };\n\n  // max \uAC12 \uACC4\uC0B0\n  const maxValue = () => {\n    if (local.max === undefined) return undefined;\n\n    if (local.type === \"datetime-sec\") {\n      return local.max.toFormatString(\"yyyy-MM-ddTHH:mm:ss\");\n    }\n    return local.max.toFormatString(\"yyyy-MM-ddTHH:mm\");\n  };\n\n  // \uBCC0\uACBD \uD578\uB4E4\uB7EC\n  const handleChange: JSX.EventHandler<HTMLInputElement, Event> = (e) => {\n    const input = e.currentTarget;\n\n    if (input.value === \"\") {\n      fieldState.setValue(undefined);\n      return;\n    }\n\n    try {\n      // yyyy-MM-ddTHH:mm \uB610\uB294 yyyy-MM-ddTHH:mm:ss \uD615\uC2DD\n      const splitParts = input.value.split(\"T\");\n      const datePart = splitParts[0] as string | undefined;\n      const timePart = splitParts[1] as string | undefined;\n      if (datePart != null && datePart !== \"\" && timePart != null && timePart !== \"\") {\n        const dateComponents = datePart.split(\"-\").map(Number);\n        const year = dateComponents[0] as number | undefined;\n        const month = dateComponents[1] as number | undefined;\n        const day = dateComponents[2] as number | undefined;\n        const timeParts = timePart.split(\":\").map(Number);\n        const hour = timeParts[0] as number | undefined;\n        const minute = timeParts[1] as number | undefined;\n        const second = timeParts[2] ?? 0;\n\n        if (\n          year !== undefined &&\n          month !== undefined &&\n          day !== undefined &&\n          hour !== undefined &&\n          minute !== undefined &&\n          !Number.isNaN(year) &&\n          !Number.isNaN(month) &&\n          !Number.isNaN(day) &&\n          !Number.isNaN(hour) &&\n          !Number.isNaN(minute) &&\n          !Number.isNaN(second) &&\n          month >= 1 && month <= 12 &&\n          day >= 1 && day <= 31 &&\n          hour >= 0 && hour <= 23 &&\n          minute >= 0 && minute <= 59 &&\n          second >= 0 && second <= 59\n        ) {\n          const newValue = new DateTime(year, month, day, hour, minute, second);\n          fieldState.setValue(newValue);\n        }\n      }\n    } catch {\n      // \uD30C\uC2F1 \uC2E4\uD328 \uC2DC setValue \uD638\uCD9C \uC548\uD568\n    }\n  };\n\n  // \uACF5\uD1B5 input props\n  const inputProps = () => ({\n    type: \"datetime-local\" as const,\n    value: inputValue(),\n    onChange: handleChange,\n    min: minValue(),\n    max: maxValue(),\n    step: step(),\n    placeholder: local.placeholder,\n    \"aria-disabled\": rest.disabled ? (\"true\" as const) : undefined,\n    \"aria-readonly\": rest.readOnly ? (\"true\" as const) : undefined,\n  });\n\n  return (\n    <Show\n      when={local.inline}\n      fallback={\n        <input\n          {...rest}\n          {...inputProps()}\n          class={[dateTimeField(objPick(local, dateTimeField.variants())), local.class]\n            .filterExists()\n            .join(\" \")}\n        />\n      }\n    >\n      <div class={dateTimeFieldContainer}>\n        <div class={dateTimeFieldContent}>\n          {displayValue() !== \"\" ? displayValue() : (local.placeholder ?? \"\\u00A0\")}\n        </div>\n        <input\n          {...rest}\n          {...inputProps()}\n          class={[dateTimeFieldInput, dateTimeField(objPick(local, dateTimeField.variants())), local.class]\n            .filterExists()\n            .join(\" \")}\n        />\n      </div>\n    </Show>\n  );\n};\n"],
  "mappings": "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",
  "names": []
}
