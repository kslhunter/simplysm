{
  "version": 3,
  "sources": ["../../../src/components/controls/number-field.tsx"],
  "sourcesContent": ["import { type Component, type JSX, Show, createSignal, splitProps } from \"solid-js\";\nimport { createFieldState } from \"../../hooks/createFieldState\";\nimport {\n  type NumberFieldStyles,\n  numberField,\n  numberFieldContainer,\n  numberFieldContent,\n  numberFieldInput,\n} from \"./number-field.css\";\nimport { objPick, numParseFloat } from \"@simplysm/core-common\";\nimport \"@simplysm/core-common\";\n\n/**\n * NumberField \uCEF4\uD3EC\uB10C\uD2B8\uC758 props\n * @property value - \uD604\uC7AC \uAC12 (onChange\uC640 \uD568\uAED8 \uC0AC\uC6A9 \uC2DC controlled, \uB2E8\uB3C5 \uC0AC\uC6A9 \uC2DC \uCD08\uAE30\uAC12)\n * @property onChange - \uAC12 \uBCC0\uACBD \uC2DC \uD638\uCD9C\uB418\uB294 \uCF5C\uBC31 (\uC788\uC73C\uBA74 controlled \uBAA8\uB4DC)\n * @property useNumberComma - true\uC77C \uACBD\uC6B0 \uCC9C\uB2E8\uC704 \uCF64\uB9C8 \uD45C\uC2DC\n * @property minDigits - \uCD5C\uC18C \uC790\uB9BF\uC218 (\uBD80\uC871\uD558\uBA74 \uC55E\uC5D0 0 \uCC44\uC6C0)\n * @property size - \uD544\uB4DC \uD06C\uAE30 (sm, lg)\n * @property inset - true\uC77C \uACBD\uC6B0 \uD14C\uC774\uBE14 \uC140 \uB4F1\uC5D0\uC11C \uC0AC\uC6A9\uD558\uAE30 \uC704\uD55C \uC778\uC14B \uC2A4\uD0C0\uC77C \uC801\uC6A9\n * @property inline - true\uC77C \uACBD\uC6B0 inline-block\uC73C\uB85C \uD45C\uC2DC\n */\nexport interface NumberFieldProps\n  extends Omit<JSX.InputHTMLAttributes<HTMLInputElement>, \"value\" | \"onChange\" | \"type\" | \"size\">,\n    NumberFieldStyles {\n  value?: number | undefined;\n  onChange?: (value: number | undefined) => void;\n  useNumberComma?: boolean;\n  minDigits?: number;\n}\n\n/**\n * \uC22B\uC790 \uC785\uB825 \uD544\uB4DC \uCEF4\uD3EC\uB10C\uD2B8\n *\n * @example\n * ```tsx\n * const [num, setNum] = createSignal<number | undefined>(1234);\n * <NumberField value={num()} onChange={setNum} />\n * <NumberField value={num()} onChange={setNum} useNumberComma />\n * <NumberField value={num()} onChange={setNum} minDigits={3} />\n * ```\n */\nexport const NumberField: Component<NumberFieldProps> = (props) => {\n  const [local, rest] = splitProps(props, [\n    ...numberField.variants(),\n    \"class\",\n    \"value\",\n    \"onChange\",\n    \"useNumberComma\",\n    \"minDigits\",\n    \"placeholder\",\n  ]);\n\n  const [isFocused, setIsFocused] = createSignal(false);\n\n  const fieldState = createFieldState({\n    value: () => local.value,\n    onChange: () => local.onChange,\n  });\n\n  // \uD45C\uC2DC\uD560 \uAC12 \uACC4\uC0B0\n  const displayValue = () => {\n    const value = fieldState.currentValue();\n    if (value === undefined) return \"\";\n\n    // \uD3EC\uCEE4\uC2A4 \uC911\uC774\uBA74 raw \uAC12 \uD45C\uC2DC\n    if (isFocused()) {\n      return String(value);\n    }\n\n    let result: string;\n\n    // minDigits \uC801\uC6A9\n    if (local.minDigits !== undefined && local.minDigits > 0) {\n      const isNegative = value < 0;\n      const absStr = String(Math.abs(value));\n\n      // \uC815\uC218 \uBD80\uBD84\uB9CC \uD328\uB529\n      const parts = absStr.split(\".\");\n      let intPart = parts[0].padStart(local.minDigits, \"0\");\n      const decPart = parts[1];\n\n      // \uCF64\uB9C8 \uD3EC\uB9F7\uB3C4 \uD568\uAED8 \uC801\uC6A9\n      if (local.useNumberComma) {\n        intPart = Number(intPart).toLocaleString();\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      const formatted = decPart != null ? `${intPart}.${decPart}` : intPart;\n      result = isNegative ? `-${formatted}` : formatted;\n    } else if (local.useNumberComma) {\n      // \uCF64\uB9C8 \uD3EC\uB9F7\uB9CC \uC801\uC6A9\n      result = value.toLocaleString(undefined, { maximumFractionDigits: 10 });\n    } else {\n      result = String(value);\n    }\n\n    return result;\n  };\n\n  // \uC785\uB825 \uD578\uB4E4\uB7EC\n  const handleInput: JSX.EventHandler<HTMLInputElement, InputEvent> = (e) => {\n    const input = e.currentTarget;\n    const raw = input.value;\n\n    // \uBE48 \uC785\uB825\uC774\uBA74 undefined\n    if (raw === \"\" || raw === \"-\") {\n      fieldState.setValue(undefined);\n      return;\n    }\n\n    // \uC22B\uC790 \uD30C\uC2F1\n    const num = numParseFloat(raw);\n    if (num !== undefined) {\n      fieldState.setValue(num);\n    }\n    // NaN\uC774\uBA74 setValue \uD638\uCD9C \uC548\uD568 (\uC774\uC804 \uAC12 \uC720\uC9C0)\n  };\n\n  // \uD3EC\uCEE4\uC2A4 \uD578\uB4E4\uB7EC\n  const handleFocus: JSX.EventHandler<HTMLInputElement, FocusEvent> = (e) => {\n    setIsFocused(true);\n    if (typeof rest.onFocus === \"function\") {\n      (rest.onFocus as (e: FocusEvent) => void)(e);\n    }\n  };\n\n  // \uBE14\uB7EC \uD578\uB4E4\uB7EC\n  const handleBlur: JSX.EventHandler<HTMLInputElement, FocusEvent> = (e) => {\n    setIsFocused(false);\n    if (typeof rest.onBlur === \"function\") {\n      (rest.onBlur as (e: FocusEvent) => void)(e);\n    }\n  };\n\n  // \uACF5\uD1B5 input props\n  const inputProps = () => ({\n    type: \"text\" as const,\n    inputMode: \"decimal\" as const,\n    value: displayValue(),\n    onInput: handleInput,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    placeholder: local.placeholder,\n    \"aria-disabled\": rest.disabled ? (\"true\" as const) : undefined,\n    \"aria-readonly\": rest.readOnly ? (\"true\" as const) : undefined,\n  });\n\n  return (\n    <Show\n      when={local.inline}\n      fallback={\n        <input\n          {...rest}\n          {...inputProps()}\n          class={[numberField(objPick(local, numberField.variants())), local.class]\n            .filterExists()\n            .join(\" \")}\n        />\n      }\n    >\n      <div class={numberFieldContainer}>\n        <div class={numberFieldContent}>\n          {displayValue() !== \"\" ? displayValue() : (local.placeholder ?? \"\\u00A0\")}\n        </div>\n        <input\n          {...rest}\n          {...inputProps()}\n          class={[numberFieldInput, numberField(objPick(local, numberField.variants())), local.class]\n            .filterExists()\n            .join(\" \")}\n        />\n      </div>\n    </Show>\n  );\n};\n"],
  "mappings": "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",
  "names": []
}
