# CLAUDE.md 정리 디자인

## 목표

- CLAUDE.md 중복 제거 및 구조 개선
- 319줄 → ~250줄 축소
- 할루시네이션 방지를 추상적 지침에서 구체적 검증 행동으로 전환

## 결정 사항

### 파일 구조

- **파일 분리 안 함**: CLAUDE.md 하나 유지
- `.claude/rules/` 사용 안 함
- `packages/solid/CLAUDE.md` 분리 안 함
- 이유: 319줄은 컨텍스트 비용 대비 분리의 관리 복잡도가 더 큼. solid-demo 정확성 문제 방지.

### 섹션 구조 (7개)

```
1. 프로젝트 개요 / 설계 철학 / 언어 설정
2. 주요 명령어
3. 패키지 구조 (+ 캐시, Playwright MCP, 커스텀 타입 흡수)
4. 아키텍처 (의존성 계층, 빌드 타겟, 주요 패턴 — ORM/서비스만)
5. 코드 컨벤션
   - ESLint 규칙
   - 함수 명명 규칙
   - TypeScript 설정
   - 프로토타입 확장
   - SolidJS 규칙 (vs React 차이점 통합)
   - Tailwind CSS (스타일 패턴, clsx 규칙, 커스텀 테마)
6. 테스트 환경
7. 코드 작성 전 필수 확인 / 검증 절차
```

### 중복 제거

"자주 발생하는 실수" 섹션 삭제. 8개 항목 중:

- 6개: 이미 다른 섹션에 존재하므로 삭제
  - `@simplysm/*/src/` import 금지 (ESLint 규칙)
  - `#privateField` 금지 (ESLint 규칙)
  - `Buffer` → `Uint8Array` (ESLint 규칙)
  - `Async` 접미사 금지 (함수 명명 규칙)
  - `createMemo` 미사용 (SolidJS 규칙)
  - React 패턴 금지 (SolidJS 규칙)
- 2개: 해당 섹션에 통합
  - `em`/`rem` 규칙 → Tailwind CSS 섹션 (예외 포함: Icon 등 주변 텍스트 비례 시 `em`)
  - 확장 메서드 확인 → 프로토타입 확장 섹션

### 이동/통합

| 기존 위치                   | 새 위치                     |
| --------------------------- | --------------------------- |
| 아키텍처 > Tailwind CSS     | 코드 컨벤션 > Tailwind CSS  |
| 아키텍처 > SolidJS vs React | 코드 컨벤션 > SolidJS 규칙  |
| 캐시 디렉토리 (독립 섹션)   | 패키지 구조에 흡수          |
| Playwright MCP (독립 섹션)  | 패키지 구조에 흡수          |
| 커스텀 타입 (독립 섹션)     | 패키지 구조에 흡수          |
| 언어 설정 (맨 아래)         | 프로젝트 개요 상단으로 이동 |

### 할루시네이션 방지 전략

- "할루시네이션 방지 가이드라인" 섹션 삭제
- 추상적 지침("추측하지 마라") 대신 각 규칙에 구체적 검증 행동을 `→`로 부착
- 예시:
  ```
  - `@simplysm/*/src/` 경로 import 금지
    → import 추가 전: 해당 패키지의 `index.ts`를 Read하여 export 확인
  ```
- "불확실할 때의 행동", "외부 지식 제한" → "확신도가 낮으면 코드를 작성하지 말고 사용자에게 질문할 것"으로 압축
- "코드 작성 전 필수 확인"과 "검증 절차"는 7번 섹션으로 유지
