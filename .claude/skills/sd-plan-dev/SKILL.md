---
name: sd-plan-dev
description: "기획서를 바탕으로 실제 구현을 수행하고, 기획과 코드의 일치를 검증하는 스킬"
argument-hint: "[기획서.md 경로]"
model: inherit
---

# 기획 구현 스킬

기획서(`_sd-output/plans/`)를 바탕으로 실제 코드를 구현하고, 구현 결과가 기획과 일치하는지 검증한다.

## 인자

- `$ARGUMENTS` (필수): 기획서 md 파일 경로 (`_sd-output/plans/` 내 파일)

## 작업 흐름

### 1. 기획서 분석

- 기획서 파일을 읽고 구현 범위를 파악한다.
- 기획서의 다음 섹션을 분석한다:
  - `## 개요`: 구현 목적 및 배경
  - `## 범위`: 구현 범위 및 제외 사항
  - `## 주요 기능`: 구현할 기능 목록
  - `## 결정사항`: 확정된 기술적 결정사항
- 구현 대상 파일 및 변경 사항을 목록화한다.
- 분석 결과를 사용자에게 요약 보고하고 진행 여부를 확인한다.

### 2. 구현

- 기획서에 명시된 기능을 순차적으로 구현한다.
- 구현 시 다음을 준수한다:
  - `CLAUDE.md`의 코딩 컨벤션 및 프로젝트 지침
  - 기획서의 `## 결정사항`에 명시된 기술적 결정
  - 기존 코드베이스의 패턴과 스타일
- 각 기능 구현 후 진행 상황을 보고한다:
  ```
  [구현 2/5] OOO 기능 구현 완료
  - 수정된 파일: `파일경로`
  - 주요 변경: ...
  ```

### 3. 구현 결과와 기획 비교

구현 완료 후 기획서의 모든 항목과 실제 구현을 비교 분석한다:

- 기획서의 각 기능별로 구현 여부 확인
- 기획과 다르게 구현된 부분 식별
- 기획에 없는 추가 구현 식별
- 기획에는 있으나 구현되지 않은 부분 식별

### 4. 차이점 확인 및 조정

기획과 구현의 차이점을 **하나씩** 사용자에게 보고하고 확인받는다:

1. **한 번에 하나씩만** 처리한다.
2. 전체 차이점 목록을 먼저 파악하고, 진행 상황을 표시한다.
3. **텍스트로 상세 내용을 제시**한다:
   ```
   [차이점 2/5] OOO 기능의 구현이 기획과 다릅니다.

   [기획 내용]
   - 기획서 원문: "..."

   [실제 구현]
   - 위치: `파일경로:라인번호`
   - 구현 내용: ...

   [차이 원인]
   - 기술적 제약 / 더 나은 방법 발견 / 기획 해석 차이 등

   [권장안] 현재 구현 유지
   - 이유: ...

   [대안] 기획대로 수정
   - 변경 내용: ...
   ```
4. **`AskUserQuestion` 도구로 선택을 요청**한다:
   - 권장안을 첫 번째 선택지에 배치하고 "(권장)" 표시
5. 사용자의 선택에 따라:
   - "현재 구현 유지": 기획서를 실제 구현에 맞게 갱신
   - "기획대로 수정": 코드를 기획에 맞게 수정
6. 모든 차이점이 해결될 때까지 반복한다.

### 5. 검증 (sd-check)

모든 차이점이 해결되면 `sd-check` 스킬로 코드를 검증한다:

1. 타입체크 수행 및 오류 수정
2. 린트 수행 및 오류 수정
3. 테스트 수행 및 오류 수정

### 6. 완성 확인

검증이 완료되면 사용자에게 다음을 알린다:

```
구현이 완료되었습니다.

[구현 요약]
- 수정된 파일: N개
- 추가된 파일: N개
- 삭제된 파일: N개

[기획서 변경]
- 기획서가 실제 구현에 맞게 갱신되었습니다. (해당 시)

**다음 추천 작업**: 새 세션에서 다음 작업을 진행하세요.
- 코드 리뷰: `/sd-review`
- 코드 재 검증: `/sd-check {{대상패키지}}`
```

## 기획서 갱신 규칙

구현 과정에서 기획과 다른 결정이 내려진 경우:

- 기획서의 해당 섹션을 실제 구현에 맞게 수정
- `## 결정사항` 섹션에 변경 이력 추가:
  ```
  - [{{날짜}}] OOO: 기획에서는 AAA였으나, BBB로 구현 (사유: ...)
  ```

## 유의사항

- 기획서에 명시되지 않은 기능은 임의로 추가하지 않는다.
- 구현 중 기획의 문제점을 발견하면 즉시 사용자에게 보고한다.
- 대규모 변경이 필요한 경우 사용자 확인 후 진행한다.
