---
name: sd-review
description: "코드 리뷰 범위를 입력받아 5가지 관점(코딩지침/성능/안정성/유지보수성/사용성)에서 검토하고, 리뷰 결과를 저장하는 스킬"
argument-hint: "[리뷰 범위]"
model: inherit
---

# 코드 리뷰 스킬

지정된 범위의 코드를 코딩지침, 성능, 안정성, 유지보수성, 가독성, 사용성 6가지 관점에서 종합 리뷰하고, 결과를 저장한다.

## 인자

- `$ARGUMENTS` (필수): 리뷰 범위

## 작업 흐름

### 1. 리뷰 범위 확인

- `$ARGUMENTS`로 전달된 리뷰 범위를 파악한다.
- 범위가 명확하지 않으면 사용자에게 구체화를 요청한다.

### 2. 코딩 지침 파일 검색

리뷰 범위와 관련된 코딩 지침 md 파일을 검색한다:

- 공통 지침: `CLAUDE.md` (프로젝트 전체 지침)
- `.claude/rules` 디렉토리 내 관련 지침 파일
- 해당 패키지 내 문서: `packages/*/CLAUDE.md`, `packages/*/*.md`

### 3. 코드 검토

코딩지침, 성능, 안정성, 유지보수성, 가독성, 사용성 6가지 관점에서 범위내 코드를 검토한다

### 4. 리뷰 분석 및 질문

리뷰결과를 분석하며 모든 항목에 대해 **하나씩** 질문한다:

1. **한 번에 하나씩만** 처리한다.
2. 질문 전에 **전체 질문 목록을 먼저 파악**하고, 진행 상황을 표시한다.
3. **텍스트로 상세 내용을 제시** 후 **사용자의 선택을 요청**한다.
   ```
   [질문 2/5] OOO 개선 사항의 수정 방향을 결정해야 합니다.

   [배경] 현재 코드에서 OOO 관점의 개선이 필요합니다.
   - 위치: `파일경로:라인번호`
   - 현재 코드: ...

   [권장안] AAA 방식으로 수정
   - 이유 1: ...
   - 이유 2: ...

   [대안] BBB 방식으로 수정
   - 장점: ...
   - 단점: ...
   ```
4. **`AskUserQuestion` 도구로 선택을 요청**한다:
   - 권장안을 첫 번째 선택지에 배치하고 "(권장)" 표시
   - 선택지는 간결하게 (상세 설명은 3번에서 이미 제시됨)
5. 모든 질문이 완료될 때까지 반복한다.

### 5. 리뷰 결과 저장

모든 질문이 완료되면 리뷰 결과를 md 파일로 저장(갱신)한다.

- 파일 위치: `_sd-output/reviews/{{yyyyMMdd}}_{{리뷰대상-kebab-case}}_{{seq}}.md`
  - seq: 동일 파일이 존재하면, 순번지정 
  - 예: "solid 패키지 리뷰" → `_sd-output/plans/260203_solid.md`
- 리뷰 결과에는 다음 섹션을 포함한다:
  - `## 개요`: 리뷰 대상, 리뷰 범위, 제외 사항
  - `## 발견 사항`: 관점별 개선 사항 목록 (심각도 표시)

### 5. 리뷰 보고서 완성 확인

사용자에게 다음을 확인한다:

```
리뷰 보고서가 완성되었습니다.

다음 중 선택해 주세요:
1. 재리뷰 (분석/질문/완성 과정 재수행)
2. 수정 실행 (계획서에 따라 코드 수정 진행)
3. 완료
```

- "재리뷰" 선택 시: 작업 흐름 3번으로 돌아가 분석/질문/완성 과정 재수행 (리뷰 보고서 갱신)
- "계획 수립" 선택 시: 새 세션에서 진행하라는 안내 출력 (`/sd-plan @{{review}}.md` 프롬프트 예시 출력)
- "수정 진행" 선택 시: 새 세션에서 진행하라는 안내 출력 (일반 수정요청 프롬프트 예시 출력)
- "완료" 선택 시: 스킬 종료

## 심각도 기준

- **Critical**: 보안 취약점, 런타임 에러 유발, 데이터 손실 가능성
- **Major**: 지침 명시적 위반, 심각한 성능 문제, 유지보수성 심각 저하
- **Minor**: 코딩 스타일 불일치, 네이밍 컨벤션 위반, 경미한 성능/안정성 이슈
- **Suggestion**: 개선 권장 사항, 더 나은 패턴 제안, 사용성 향상 아이디어
